<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Dashboard | Poke Negocio</title>
  <link rel="stylesheet" href="style.css">
  <style>
    .pokemon-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
      gap: 20px;
      margin: 20px 0;
    }
    
    .pokemon-card {
      background: white;
      border-radius: 10px;
      padding: 15px;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
      text-align: center;
      transition: transform 0.3s ease;
    }
    
    .pokemon-card:hover {
      transform: translateY(-5px);
    }
    
    .pokemon-image {
      width: 100px;
      height: 100px;
      margin: 0 auto 10px;
    }
    
    .pokemon-name {
      font-weight: bold;
      text-transform: capitalize;
      margin-bottom: 5px;
    }
    
    .pokemon-types {
      display: flex;
      justify-content: center;
      gap: 5px;
      flex-wrap: wrap;
    }
    
    .type-badge {
      padding: 2px 8px;
      border-radius: 15px;
      font-size: 12px;
      color: white;
    }
    
    .search-section {
      margin-top: 30px;
      padding: 20px;
      background: #f5f5f5;
      border-radius: 10px;
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="card">
      <div class="topbar">
        <h1>Panel principal - Poke Negocio</h1>
        <button id="logoutBtn" class="btn">Cerrar sesión</button>
      </div>

      <p class="note">Bienvenido, <span id="userEmail"></span></p>
      <hr>

      <!-- Sección de Pokémon en tarjetas -->
      <h2>Pokémon Disponibles</h2>
      <div id="pokemonGrid" class="pokemon-grid">
        <!-- Las tarjetas de Pokémon se generarán aquí con JavaScript -->
      </div>

      <hr>

      <!-- Sección de búsqueda movida abajo -->
      <div class="search-section">
        <h2>Buscar Pokémon</h2>
        <p>Introduce el nombre o número del Pokémon:</p>

        <input type="text" id="pokeInput" placeholder="Ej: pikachu o 25">
        <button id="searchPokeBtn" class="btn">Buscar Pokémon</button>

        <div id="pokeResult" style="margin-top:20px"></div>
      </div>

      <hr>

      
    </div>
  </div>

  <script>
    // Colores para los tipos de Pokémon
    const typeColors = {
      normal: '#A8A878',
      fire: '#F08030',
      water: '#6890F0',
      electric: '#F8D030',
      grass: '#78C850',
      ice: '#98D8D8',
      fighting: '#C03028',
      poison: '#A040A0',
      ground: '#E0C068',
      flying: '#A890F0',
      psychic: '#F85888',
      bug: '#A8B820',
      rock: '#B8A038',
      ghost: '#705898',
      dragon: '#7038F8',
      dark: '#705848',
      steel: '#B8B8D0',
      fairy: '#EE99AC'
    };

    // Array de algunos Pokémon populares para mostrar
    const popularPokemon = ['pikachu', 'charizard', 'bulbasaur', 'squirtle', 'jigglypuff', 'gengar', 'eevee', 'mewtwo', 'lucario', 'garchomp'];

    // Función para cargar Pokémon populares
    async function loadPopularPokemon() {
      const grid = document.getElementById('pokemonGrid');
      grid.innerHTML = '<p>Cargando Pokémon...</p>';

      try {
        const promises = popularPokemon.map(pokemonName => 
          fetch(`https://pokeapi.co/api/v2/pokemon/${pokemonName}`).then(res => res.json())
        );

        const pokemonData = await Promise.all(promises);
        
        grid.innerHTML = '';
        
        pokemonData.forEach(pokemon => {
          const card = createPokemonCard(pokemon);
          grid.appendChild(card);
        });
      } catch (error) {
        grid.innerHTML = '<p>Error al cargar los Pokémon</p>';
        console.error('Error:', error);
      }
    }

    // Función para crear una tarjeta de Pokémon
    function createPokemonCard(pokemon) {
      const card = document.createElement('div');
      card.className = 'pokemon-card';
      
      const types = pokemon.types.map(typeInfo => typeInfo.type.name);
      
      card.innerHTML = `
        <img class="pokemon-image" src="${pokemon.sprites.other['official-artwork'].front_default || pokemon.sprites.front_default}" alt="${pokemon.name}">
        <div class="pokemon-name">#${pokemon.id} ${pokemon.name}</div>
        <div class="pokemon-types">
          ${types.map(type => `
            <span class="type-badge" style="background-color: ${typeColors[type] || '#777'}">${type}</span>
          `).join('')}
        </div>
      `;
      
      // Hacer la tarjeta clickeable para mostrar más info
      card.style.cursor = 'pointer';
      card.addEventListener('click', () => {
        showPokemonDetails(pokemon);
      });
      
      return card;
    }

    // Función para mostrar detalles del Pokémon (puedes expandir esto)
    function showPokemonDetails(pokemon) {
      const resultDiv = document.getElementById('pokeResult');
      resultDiv.innerHTML = `
        <div style="background: white; padding: 15px; border-radius: 10px; margin-top: 10px;">
          <h3>Detalles de ${pokemon.name}</h3>
          <p><strong>Altura:</strong> ${pokemon.height / 10}m</p>
          <p><strong>Peso:</strong> ${pokemon.weight / 10}kg</p>
          <p><strong>Habilidades:</strong> ${pokemon.abilities.map(ability => ability.ability.name).join(', ')}</p>
        </div>
      `;
    }

    // Función de búsqueda (ya existente, modificada ligeramente)
    async function searchPokemon() {
      const input = document.getElementById('pokeInput').value.toLowerCase().trim();
      const resultDiv = document.getElementById('pokeResult');

      if (!input) {
        resultDiv.innerHTML = '<p style="color: red;">Por favor, introduce un nombre o número</p>';
        return;
      }

      try {
        const response = await fetch(`https://pokeapi.co/api/v2/pokemon/${input}`);
        if (!response.ok) throw new Error('Pokémon no encontrado');
        
        const pokemon = await response.json();
        const card = createPokemonCard(pokemon);
        
        resultDiv.innerHTML = '<h3>Resultado de búsqueda:</h3>';
        resultDiv.appendChild(card);
        
      } catch (error) {
        resultDiv.innerHTML = `<p style="color: red;">Error: ${error.message}</p>`;
      }
    }

    // Event listeners
    document.getElementById('searchPokeBtn').addEventListener('click', searchPokemon);
    document.getElementById('pokeInput').addEventListener('keypress', function(e) {
      if (e.key === 'Enter') searchPokemon();
    });

    // Cargar Pokémon al iniciar
    document.addEventListener('DOMContentLoaded', function() {
      loadPopularPokemon();
      
      // Mostrar email del usuario (si existe)
      const userEmail = localStorage.getItem('userEmail');
      if (userEmail) {
        document.getElementById('userEmail').textContent = userEmail;
      }
    });

    // Mantener tu código existente para logout y API example
    document.getElementById('logoutBtn').addEventListener('click', function() {
      localStorage.removeItem('userEmail');
      window.location.href = 'index.html';
    });

    document.getElementById('apiExampleBtn').addEventListener('click', async function() {
      try {
        const response = await fetch('https://jsonplaceholder.typicode.com/posts/1');
        const data = await response.json();
        document.getElementById('apiOutput').textContent = JSON.stringify(data, null, 2);
      } catch (error) {
        document.getElementById('apiOutput').textContent = 'Error: ' + error.message;
      }
    });
  </script>
</body>
</html>